{% extends 'blogapp/base.html' %}
{% load static %}

{% block content %}
<div class="row">
  <div class="col-12 mt-1 mb-5 header">
    <h1 class="h1 font-weight-normal text-capitalize">{{topic.title}}</h1>
    <div class="align-items-end">
      <div class="float-start">
        {{date}} przez <b>{{topic.owner}}</b>
      </div>
      {% if user == topic.owner %}
        <div class="float-start">
          <a href="{% url 'blogapp:edit_topic' topic.id %}">Edytuj temat</a>
          <a href="{% url 'blogapp:delete_topic' topic.id %}">Usuń temat</a>
        </div>
      {% endif %}  
    </div>
  </div>
  <div class="col-lg-9 px-4">
    <div><h2 class="h3">{{topic.description}}</h2></div>
    <br><br>
    <div class="pb-5">{{topic.text|safe}}
    </div>
    <div class="pb-5">
      <h5>Komentarze:</h5>
      <ul>
        {% for comment in comments %}
          <li>
            <div class="p-2">
              <div class=" pb-1">{{ comment.text }} </div>
              <div class="ml-auto">Wysłano: <b>{{comment.date_created}}</b> przez: <b>{{comment.owner}}</b></div>
            </div>
          </li>
        {% empty %}
          <li>No comments found</li>
        {% endfor %}
      </ul>
      <br>
      {% if user.is_authenticated %}
      <form action="{% url 'blogapp:topic' topic.id %}" method = 'post'>
        {% csrf_token %}{{form.as_p}}
        <button name ='submit'>Dodaj komentarz</button>
      </form>
      {% else %}
      <p>Musisz być zalogowany aby móc dodawać komentarze.</p>
      {% endif %}
    </div>
  </div>
  <div class="col-lg-3">
      
    {% for image in images %}
      <img class="img-thumbnail" src="{% static image %}">
    {% endfor %}
  </div>
  
</div>
{% endblock content %}